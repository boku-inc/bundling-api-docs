{
	"info": {
		"_postman_id": "6c98690b-17ea-4b68-af3a-51fcc9ae68f1",
		"name": "Subscriptions API",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Outbound (Merchant -> Boku)",
			"item": [
				{
					"name": "Hosted Optin",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "4ba709cf-3371-4757-8504-34e7dfd8d7fe",
								"exec": [
									"const uuid = require('uuid')",
									"pm.globals.set(\"consumerId\", new Date().getTime())",
									"pm.globals.set(\"merchantSubscriptionId\", uuid.v4())"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "e37d7dc9-dec6-4f05-940a-1ddf59876869",
								"exec": [
									"pm.globals.set(\"subscriptionId\", xml2Json(responseBody)[\"hosted-subscription-optin-response\"][\"subscription-id\"])"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-CWAProxy-HTTPS",
								"value": "{{X-CWAProxy-HTTPS}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<hosted-subscription-optin-request>\n    <consumer-id>{{consumerId}}</consumer-id>\n    <country>{{country}}</country>\n    <merchant-id>{{merchantId}}</merchant-id>\n    <merchant-request-id>{{$timestamp}}</merchant-request-id>\n    <merchant-subscription-id>{{merchantSubscriptionId}}</merchant-subscription-id>\n    <subscription-plan-id>{{subscriptionPlanId}}</subscription-plan-id>\n    <entitlement-id>{{entitlementId}}</entitlement-id>\n    <forward-url>http://www.google.com/</forward-url>\n    <!--network>{{networkId}}</network-->\n    <!--plan-start-date>{{timestamp}}</plan-start-date-->\n</hosted-subscription-optin-request>",
							"options": {
								"raw": {
									"language": "xml"
								}
							}
						},
						"url": {
							"raw": "{{subscription_url}}/subscription/1.0/hosted-subscription-optin",
							"host": [
								"{{subscription_url}}"
							],
							"path": [
								"subscription",
								"1.0",
								"hosted-subscription-optin"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Subscription",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "e1932f6a-099c-4b8c-8f17-4891d611584c",
								"exec": [
									"pm.globals.set(\"subscriptionId\", xml2Json(responseBody)[\"create-subscription-response\"][\"subscription-id\"])"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "89aefe93-3d83-470e-9ddb-f4b77b91c639",
								"exec": [
									"const uuid = require('uuid')",
									"pm.globals.set(\"consumerId\", new Date().getTime())",
									"pm.globals.set(\"merchantSubscriptionId\", uuid.v4())"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-CWAProxy-HTTPS",
								"value": "{{X-CWAProxy-HTTPS}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<create-subscription-request>\n    <country>{{country}}</country>\n    <merchant-id>{{merchantId}}</merchant-id>\n    <merchant-request-id>{{$timestamp}}</merchant-request-id>\n    <entitlement-id>{{entitlementId}}</entitlement-id>\n    <merchant-subscription-id>{{merchantSubscriptionId}}</merchant-subscription-id>\n    <consumer-id>{{consumerId}}</consumer-id>\n    <subscription-plan-id>{{subscriptionPlanId}}</subscription-plan-id>\n    <subscription-status>paused</subscription-status>\n    <!--plan-start-date>{{timestamp}}</plan-start-date-->\n</create-subscription-request>",
							"options": {
								"raw": {
									"language": "xml"
								}
							}
						},
						"url": {
							"raw": "{{subscription_url}}/subscription/1.0/create-subscription",
							"host": [
								"{{subscription_url}}"
							],
							"path": [
								"subscription",
								"1.0",
								"create-subscription"
							]
						}
					},
					"response": []
				},
				{
					"name": "Resume Subscription",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "00edb336-1b41-4ab2-a1d8-7ff667417247",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-CWAProxy-HTTPS",
								"value": "{{X-CWAProxy-HTTPS}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<resume-subscription-request>\n    <country>{{country}}</country>\n    <merchant-id>{{merchantId}}</merchant-id>\n    <subscription-id>{{subscriptionId}}</subscription-id>\n</resume-subscription-request>",
							"options": {
								"raw": {
									"language": "xml"
								}
							}
						},
						"url": {
							"raw": "{{subscription_url}}/subscription/1.0/resume-subscription",
							"host": [
								"{{subscription_url}}"
							],
							"path": [
								"subscription",
								"1.0",
								"resume-subscription"
							]
						}
					},
					"response": []
				},
				{
					"name": "Cancel Subscription",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "110daaab-952b-442d-bb64-14f1d2b455f6",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-CWAProxy-HTTPS",
								"type": "text",
								"value": "{{X-CWAProxy-HTTPS}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<cancel-subscription-request>\n    <country>{{country}}</country>\n    <merchant-id>{{merchantId}}</merchant-id>\n    <subscription-id>{{subscriptionId}}</subscription-id>\n    <!--apply-after-date>{{timestamp}}</apply-after-date-->\n</cancel-subscription-request>",
							"options": {
								"raw": {
									"language": "xml"
								}
							}
						},
						"url": {
							"raw": "{{subscription_url}}/subscription/1.0/cancel-subscription",
							"host": [
								"{{subscription_url}}"
							],
							"path": [
								"subscription",
								"1.0",
								"cancel-subscription"
							]
						}
					},
					"response": []
				},
				{
					"name": "Query Subscription",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c340b9a1-dc91-4a05-8338-b213a492152c",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-CWAProxy-HTTPS",
								"type": "text",
								"value": "{{X-CWAProxy-HTTPS}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<query-subscription-request>\n    <country>{{country}}</country>\n    <merchant-id>{{merchantId}}</merchant-id>\n    <subscription-id>{{subscriptionId}}</subscription-id>\n    <!--merchant-subscription-id>{{merchantSubscriptionId}}</merchant-subscription-id-->\n</query-subscription-request>",
							"options": {
								"raw": {
									"language": "xml"
								}
							}
						},
						"url": {
							"raw": "{{subscription_url}}/subscription/1.0/query-subscription",
							"host": [
								"{{subscription_url}}"
							],
							"path": [
								"subscription",
								"1.0",
								"query-subscription"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Inbound (Boku -> Merchant)",
			"item": [
				{
					"name": "Send Subscription Optin Notification",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-CWAProxy-HTTPS",
								"type": "text",
								"value": "{{X-CWAProxy-HTTPS}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<subscription-optin-notification>\n    <result status=\"OK\">\n        <reason-code>0</reason-code>\n        <message>Operation Successful</message>\n        <retriable>false</retriable>\n    </result>\n    <consumer-id>{{consumerId}}</consumer-id>\n    <country>{{country}}</country>\n    <user-token>{{$randomUUID}}</user-token>\n    <merchant-id>{{merchantId}}</merchant-id>\n    <merchant-subscription-id>{{merchantSubscriptionId}}</merchant-subscription-id>\n    <network>{{networkId}}</network>\n    <notification-timestamp>{{timestamp}}</notification-timestamp>\n    <status>activated</status>\n    <subscription-id>{{subscriptionId}}</subscription-id>\n    <timestamp>{{timestamp}}</timestamp>\n</subscription-optin-notification>",
							"options": {
								"raw": {
									"language": "xml"
								}
							}
						},
						"url": {
							"raw": "{{merchant_url}}/subscription-optin-notification",
							"host": [
								"{{merchant_url}}"
							],
							"path": [
								"subscription-optin-notification"
							]
						}
					},
					"response": []
				},
				{
					"name": "Send Subscription Status Notification",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-CWAProxy-HTTPS",
								"type": "text",
								"value": "{{X-CWAProxy-HTTPS}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<subscription-status-notification>\n    <consumer-id>{{consumerId}}</consumer-id>\n    <country>{{country}}</country>\n    <merchant-id>{{merchantId}}</merchant-id>\n    <merchant-subscription-id>{{merchantSubscriptionId}}</merchant-subscription-id>\n    <network>{{networkId}}</network>\n    <notification-timestamp>{{timestamp}}</notification-timestamp>\n    <status>activated</status>\n    <subscription-id>{{subscriptionId}}</subscription-id>\n    <timestamp>{{timestamp}}</timestamp>\n</subscription-status-notification>",
							"options": {
								"raw": {
									"language": "xml"
								}
							}
						},
						"url": {
							"raw": "{{merchant_url}}/subscription-status-notification",
							"host": [
								"{{merchant_url}}"
							],
							"path": [
								"subscription-status-notification"
							]
						}
					},
					"response": []
				},
				{
					"name": "Send Charge Notification",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "6b41f283-a1da-4cd7-aced-8a6ae8f3d93d",
								"exec": [
									"const uuid = require('uuid')",
									"pm.variables.set(\"chargeId\", uuid.v4().replace(/-/g, '').substring(0, 24))"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-CWAProxy-HTTPS",
								"value": "{{X-CWAProxy-HTTPS}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<charge-notification>\n    <result status=\"OK\">\n        <reason-code>0</reason-code>\n        <message>Operation Successful</message>\n        <retriable>false</retriable>\n    </result>\n    <charge-id>{{chargeId}}</charge-id>\n    <charge-status>success</charge-status>\n    <charge-type>renewal</charge-type>\n    <consumer-id>{{consumerId}}</consumer-id>\n    <country>{{country}}</country>\n    <currency>{{currency}}</currency>\n    <merchant-id>{{merchantId}}</merchant-id>\n    <merchant-subscription-id>{{merchantSubscriptionId}}</merchant-subscription-id>\n    <network>{{networkId}}</network>\n    <notification-timestamp>{{timestamp}}</notification-timestamp>\n    <retry-count>1</retry-count>\n    <retry-duration>352</retry-duration>\n    <subscription-id>{{subscriptionId}}</subscription-id>\n    <timestamp>{{timestamp}}</timestamp>\n    <total-amount>10.0000</total-amount>\n</charge-notification>",
							"options": {
								"raw": {
									"language": "xml"
								}
							}
						},
						"url": {
							"raw": "{{merchant_url}}/charge-notification",
							"host": [
								"{{merchant_url}}"
							],
							"path": [
								"charge-notification"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Carrier Simulator",
			"item": [
				{
					"name": "Behaviors",
					"item": [
						{
							"name": "Set Charge Behavior",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "X-CWAProxy-HTTPS",
										"value": "{{X-CWAProxy-HTTPS}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<charge-behavior error-code=\"900\" delivery-status=\"REJECTD\"/>",
									"options": {
										"raw": {
											"language": "xml"
										}
									}
								},
								"url": {
									"raw": "{{simulation_url}}/msisdn/{{msisdn}}/charge-behavior",
									"host": [
										"{{simulation_url}}"
									],
									"path": [
										"msisdn",
										"{{msisdn}}",
										"charge-behavior"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Charge Behavior",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "X-CWAProxy-HTTPS",
										"value": "{{X-CWAProxy-HTTPS}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{simulation_url}}/msisdn/{{msisdn}}/charge-behavior",
									"host": [
										"{{simulation_url}}"
									],
									"path": [
										"msisdn",
										"{{msisdn}}",
										"charge-behavior"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Charge Behavior",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "X-CWAProxy-HTTPS",
										"value": "{{X-CWAProxy-HTTPS}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{simulation_url}}/msisdn/{{msisdn}}/charge-behavior",
									"host": [
										"{{simulation_url}}"
									],
									"path": [
										"msisdn",
										"{{msisdn}}",
										"charge-behavior"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete All Charge Behaviors",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "X-CWAProxy-HTTPS",
										"value": "{{X-CWAProxy-HTTPS}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{simulation_url}}/msisdn",
									"host": [
										"{{simulation_url}}"
									],
									"path": [
										"msisdn"
									]
								}
							},
							"response": []
						},
						{
							"name": "Set Optin Behavior",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "X-CWAProxy-HTTPS",
										"value": "{{X-CWAProxy-HTTPS}}",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\n<subscription-optin-behavior\n    subscription-optin-response-reason-code=\"96\"\n    notification-reason-code=\"96\"\n    notification-network=\"{{networkId}}\"\n    notification-latency=\"5000\"\n    msisdn=\"{{msisdn}}\"/>",
									"options": {
										"raw": {
											"language": "xml"
										}
									}
								},
								"url": {
									"raw": "{{simulation_url}}/subscription/{{consumerId}}/subscription-optin-behavior",
									"host": [
										"{{simulation_url}}"
									],
									"path": [
										"subscription",
										"{{consumerId}}",
										"subscription-optin-behavior"
									]
								}
							},
							"response": []
						},
						{
							"name": "Get Optin Behavior",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "X-CWAProxy-HTTPS",
										"value": "{{X-CWAProxy-HTTPS}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{simulation_url}}/subscription/{{consumerId}}/subscription-optin-behavior",
									"host": [
										"{{simulation_url}}"
									],
									"path": [
										"subscription",
										"{{consumerId}}",
										"subscription-optin-behavior"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete Optin Behavior",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "X-CWAProxy-HTTPS",
										"value": "{{X-CWAProxy-HTTPS}}",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{simulation_url}}/subscription/{{consumerId}}/subscription-optin-behavior",
									"host": [
										"{{simulation_url}}"
									],
									"path": [
										"subscription",
										"{{consumerId}}",
										"subscription-optin-behavior"
									]
								}
							},
							"response": []
						},
						{
							"name": "Delete All Optin Behavior",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "X-CWAProxy-HTTPS",
										"type": "text",
										"value": "{{X-CWAProxy-HTTPS}}"
									}
								],
								"url": {
									"raw": "{{simulation_url}}/subscription",
									"host": [
										"{{simulation_url}}"
									],
									"path": [
										"subscription"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Charge Subscription",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "X-CWAProxy-HTTPS",
								"value": "{{X-CWAProxy-HTTPS}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{simulation_url}}/subscription/{{subscriptionId}}/charge",
							"host": [
								"{{simulation_url}}"
							],
							"path": [
								"subscription",
								"{{subscriptionId}}",
								"charge"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"auth": {
		"type": "apikey",
		"apikey": [
			{
				"key": "value",
				"value": "2/HMAC_SHA256(H+SHA256(E)) partner-id={{merchantId}}, key-id={{keyId}}",
				"type": "string"
			},
			{
				"key": "key",
				"value": "Authorization",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "5c1beb17-c8a2-44f0-8b0e-961a760c6904",
				"type": "text/javascript",
				"exec": [
					"const moment = require('moment');",
					"pm.variables.set(\"timestamp\", moment().format(\"YYYY-MM-DD HH:mm:ss\"));"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "15d636c6-9390-4275-b7b7-b1c5b24a38c7",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"protocolProfileBehavior": {}
}